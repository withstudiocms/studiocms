{"uid":"76ddb3a1fe71e4fb","name":"API Route - withEffectAPI","fullName":"packages/@withstudiocms/effect/test/astro/api-route.test.ts#@withstudiocms/effect Package Tests API Route - withEffectAPI","historyId":"f7d2473e1065fe399f2f57bb33fc31cc:d41d8cd98f00b204e9800998ecf8427e","time":{"start":1764598169174,"stop":1764598169185,"duration":11},"status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[],"testStage":{"status":"passed","steps":[{"name":"Testing withEffectAPI with successful Effect","time":{"start":1764598169174,"stop":1764598169176,"duration":2},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"Expected Status","value":"200"},{"name":"Result Status","value":"200"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Testing withEffectAPI with failing Effect","time":{"start":1764598169176,"stop":1764598169180,"duration":4},"status":"passed","steps":[{"name":"Asserting error response","time":{"start":1764598169179,"stop":1764598169180,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"Expected Status","value":"500"},{"name":"Result Status","value":"500"},{"name":"Expected Error Message","value":"fail"},{"name":"Result Error Message","value":"fail"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Testing withEffectAPI should apply CORS headers if configured","time":{"start":1764598169180,"stop":1764598169181,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"Access-Control-Allow-Origin","value":"https://example.com"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Testing withEffectAPI should handle preflight requests (with cors)","time":{"start":1764598169181,"stop":1764598169182,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"Status","value":"204"},{"name":"Access-Control-Allow-Origin","value":"https://example.com"},{"name":"Access-Control-Allow-Methods","value":"OPTIONS, GET, POST"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Testing withEffectAPI should handle preflight requests (without cors)","time":{"start":1764598169182,"stop":1764598169182,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"Status","value":"204"},{"name":"Access-Control-Allow-Origin","value":"*"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Testing withEffectAPI should apply success middleware if provided","time":{"start":1764598169182,"stop":1764598169183,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"Custom Header","value":"value"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Testing withEffectAPI should apply error middleware if provided","time":{"start":1764598169183,"stop":1764598169184,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"Status","value":"500"},{"name":"Error Message","value":"fail"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Testing withEffectAPI should handle multiple CORS origins","time":{"start":1764598169184,"stop":1764598169185,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[{"name":"Access-Control-Allow-Origin","value":"https://example.com"}],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":9,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},"afterStages":[],"labels":[{"name":"owner","value":"withstudiocms"},{"name":"lead","value":"Adam Matthiesen"},{"name":"framework","value":"Vitest"},{"name":"language","value":"TypeScript/JavaScript"},{"name":"framework","value":"vitest"},{"name":"language","value":"javascript"},{"name":"parentSuite","value":"@withstudiocms/effect Package Tests"},{"name":"host","value":"runnervmg1sw1"},{"name":"thread","value":"vitest-worker-3"},{"name":"package","value":"packages.@withstudiocms.effect.test.astro.api-route.test.ts"},{"name":"parentSuite","value":"@withstudiocms/effect Package Tests"},{"name":"suite","value":"API Route Helpers Tests"},{"name":"subSuite","value":"withEffectAPI Tests"},{"name":"tag","value":"package:@withstudiocms/effect"},{"name":"tag","value":"type:unit"},{"name":"tag","value":"scope:withstudiocms"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","owner":"withstudiocms","retries":[],"categories":[],"history":{"statistic":{"failed":0,"broken":0,"skipped":0,"passed":26,"unknown":0,"total":26},"items":[{"uid":"321870a706ace2d9","reportUrl":"https://tests.studiocms.dev/allure-reports/adam_astrodb-to-kyselydb-migrator/studiocms-tests/19821323520_1764589282086/#testresult/321870a706ace2d9","status":"passed","time":{"start":1764589149526,"stop":1764589149536,"duration":10}},{"uid":"efaef90fcb652429","reportUrl":"https://tests.studiocms.dev/allure-reports/adam_astrodb-to-kyselydb-migrator/studiocms-tests/19819645086_1764585585061/#testresult/efaef90fcb652429","status":"passed","time":{"start":1764585453570,"stop":1764585453583,"duration":13}},{"uid":"e59e2e8c075eaff9","reportUrl":"https://tests.studiocms.dev/allure-reports/adam_astrodb-to-kyselydb-migrator/studiocms-tests/19819525734_1764585315128/#testresult/e59e2e8c075eaff9","status":"passed","time":{"start":1764585191909,"stop":1764585191916,"duration":7}},{"uid":"73809c83a712bd18","reportUrl":"https://tests.studiocms.dev/allure-reports/adam_astrodb-to-kyselydb-migrator/studiocms-tests/19818206773_1764582525925/#testresult/73809c83a712bd18","status":"passed","time":{"start":1764582399430,"stop":1764582399443,"duration":13}},{"uid":"30f8491851ceb70a","reportUrl":"https://tests.studiocms.dev/allure-reports/adam_astrodb-to-kyselydb-migrator/studiocms-tests/19816576694_1764578996187/#testresult/30f8491851ceb70a","status":"passed","time":{"start":1764578870513,"stop":1764578870524,"duration":11}},{"uid":"e241039ff801b464","reportUrl":"https://tests.studiocms.dev/allure-reports/adam_astrodb-to-kyselydb-migrator/studiocms-tests/19816437426_1764578659137/#testresult/e241039ff801b464","status":"passed","time":{"start":1764578540838,"stop":1764578540849,"duration":11}},{"uid":"c7a1876b52f6821","reportUrl":"https://tests.studiocms.dev/allure-reports/adam_astrodb-to-kyselydb-migrator/studiocms-tests/19811029010_1764562726121/#testresult/c7a1876b52f6821","status":"passed","time":{"start":1764562601371,"stop":1764562601382,"duration":11}},{"uid":"dbf072b26b4dd6ba","reportUrl":"https://tests.studiocms.dev/allure-reports/adam_astrodb-to-kyselydb-migrator/studiocms-tests/19810681807_1764561496722/#testresult/dbf072b26b4dd6ba","status":"passed","time":{"start":1764561366896,"stop":1764561366907,"duration":11}},{"uid":"bc04e0340f343a64","reportUrl":"https://tests.studiocms.dev/allure-reports/adam_astrodb-to-kyselydb-migrator/studiocms-tests/19802379461_1764523816622/#testresult/bc04e0340f343a64","status":"passed","time":{"start":1764523683982,"stop":1764523683993,"duration":11}},{"uid":"6bc0805e5bda5158","reportUrl":"https://tests.studiocms.dev/allure-reports/adam_astrodb-to-kyselydb-migrator/studiocms-tests/19801605929_1764519775515/#testresult/6bc0805e5bda5158","status":"passed","time":{"start":1764519648447,"stop":1764519648455,"duration":8}},{"uid":"7def12ff97431e1f","reportUrl":"https://tests.studiocms.dev/allure-reports/adam_astrodb-to-kyselydb-migrator/studiocms-tests/19801522553_1764519360114/#testresult/7def12ff97431e1f","status":"passed","time":{"start":1764519230639,"stop":1764519230652,"duration":13}},{"uid":"8b71a0cdd0c451d1","reportUrl":"https://tests.studiocms.dev/allure-reports/adam_astrodb-to-kyselydb-migrator/studiocms-tests/19801455620_1764519033800/#testresult/8b71a0cdd0c451d1","status":"passed","time":{"start":1764518906813,"stop":1764518906824,"duration":11}},{"uid":"bfc3f4a35eaa7408","reportUrl":"https://tests.studiocms.dev/allure-reports/adam_astrodb-to-kyselydb-migrator/studiocms-tests/19800847977_1764515970964/#testresult/bfc3f4a35eaa7408","status":"passed","time":{"start":1764515841947,"stop":1764515841963,"duration":16}},{"uid":"fbbfc3b694d6fe28","reportUrl":"https://tests.studiocms.dev/allure-reports/adam_astrodb-to-kyselydb-migrator/studiocms-tests/19800661252_1764515051073/#testresult/fbbfc3b694d6fe28","status":"passed","time":{"start":1764514923013,"stop":1764514923024,"duration":11}},{"uid":"97ed6f352cd188eb","reportUrl":"https://tests.studiocms.dev/allure-reports/adam_astrodb-to-kyselydb-migrator/studiocms-tests/19800430534_1764513733003/#testresult/97ed6f352cd188eb","status":"passed","time":{"start":1764513606095,"stop":1764513606106,"duration":11}},{"uid":"d61c5b66e06ff134","reportUrl":"https://tests.studiocms.dev/allure-reports/adam_astrodb-to-kyselydb-migrator/studiocms-tests/19800141383_1764512278289/#testresult/d61c5b66e06ff134","status":"passed","time":{"start":1764512151604,"stop":1764512151617,"duration":13}},{"uid":"e9a93dfbdc405002","reportUrl":"https://tests.studiocms.dev/allure-reports/adam_astrodb-to-kyselydb-migrator/studiocms-tests/19799423934_1764508644497/#testresult/e9a93dfbdc405002","status":"passed","time":{"start":1764508513801,"stop":1764508513813,"duration":12}},{"uid":"f2a8d82c788a408d","reportUrl":"https://tests.studiocms.dev/allure-reports/adam_astrodb-to-kyselydb-migrator/studiocms-tests/19798740931_1764505228740/#testresult/f2a8d82c788a408d","status":"passed","time":{"start":1764505101019,"stop":1764505101030,"duration":11}},{"uid":"beda771c6f2d0806","reportUrl":"https://tests.studiocms.dev/allure-reports/adam_astrodb-to-kyselydb-migrator/studiocms-tests/19798122039_1764501779837/#testresult/beda771c6f2d0806","status":"passed","time":{"start":1764501656497,"stop":1764501656508,"duration":11}},{"uid":"8e8f3114f62499a1","reportUrl":"https://tests.studiocms.dev/allure-reports/adam_astrodb-to-kyselydb-migrator/studiocms-tests/19797981168_1764501060559/#testresult/8e8f3114f62499a1","status":"passed","time":{"start":1764500931310,"stop":1764500931321,"duration":11}}]},"tags":["package:@withstudiocms/effect","type:unit","scope:withstudiocms"]},"source":"76ddb3a1fe71e4fb.json","parameterValues":[]}