---
import { SDKCoreJs, runSDK } from 'studiocms:sdk';
import type { SiteConfigCacheObject } from 'studiocms:sdk/types';
import TreeRenderer from './TreeRenderer.astro';

interface Props {
	isNewFolder?: boolean;
	isNewPage?: boolean;
	config: SiteConfigCacheObject;
}

const { config, isNewFolder, isNewPage } = Astro.props as Props;

const hideDefaults = config.data.hideDefaultIndex;

const { data: PageFolderTree } = await runSDK(SDKCoreJs.GET.pageFolderTree(hideDefaults));
---

<TreeRenderer data={PageFolderTree} {isNewFolder} {isNewPage} />