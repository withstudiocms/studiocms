---
import { runSDK, SDKCoreJs } from 'studiocms:sdk';
import type { DynamicConfigEntry, StudioCMSSiteConfig } from 'studiocms:sdk/types';
import TreeRenderer from './TreeRenderer.astro';

interface Props {
	isNewFolder?: boolean;
	isNewPage?: boolean;
	config: DynamicConfigEntry<StudioCMSSiteConfig>;
}

const { config, isNewFolder, isNewPage } = Astro.props as Props;

const hideDefaults = config.data.hideDefaultIndex;

const PageFolderTree = await runSDK(SDKCoreJs.GET.pageFolderTree(hideDefaults));
---

<TreeRenderer data={PageFolderTree} {isNewFolder} {isNewPage} />