---
import './metric.css';
import { Icon } from 'studiocms:ui/components/icon';
import type { AvailableIcons } from 'studiocms:ui/icons';
import { WEB_VITALS_METRIC_LABELS } from '../consts.js';
import type { WebVitalsMetricType, WebVitalsRating } from '../schemas.js';
import { ratingCardClasses, ratingIcons, ratingText } from './shared.js';

interface Props {
	metric: WebVitalsMetricType;
	rating?: WebVitalsRating;
}

const { metric, rating } = Astro.props;
const IconName: AvailableIcons = rating ? ratingIcons[rating] : 'heroicons:information-circle';
const iconColor = rating ? ratingText[rating] : '';
const cardColors = rating ? ratingCardClasses[rating] : 'border-gray bg-light-gray';
---
<article class={`metric-card ${cardColors}`}>
    <h4 class="metric-title">
        <span class={`icon ${iconColor}`}><Icon name={IconName} height={24} width={24} /></span>
        {WEB_VITALS_METRIC_LABELS[metric]} ({metric})
    </h4>
    <slot />
</article>