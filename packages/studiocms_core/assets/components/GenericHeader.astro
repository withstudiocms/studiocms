---
import { defaultFrontEndConfig } from 'studiocms:config';
import { createHead, headDefaults } from 'studiocms:lib';

interface Props {
	title: string;
	description: string;
	favicon: string;
	lang?: string;
	ogImage?: string;
	canonicalURL?: URL;
}

const {
	title,
	description,
	favicon = defaultFrontEndConfig &&
	typeof defaultFrontEndConfig === 'object' &&
	defaultFrontEndConfig.favicon
		? defaultFrontEndConfig.favicon
		: '/favicon.svg',
	canonicalURL = Astro.url,
	lang = 'en',
	ogImage,
} = Astro.props;

const head = createHead(
	headDefaults(title, description, lang, Astro, favicon, ogImage, canonicalURL),
	defaultFrontEndConfig &&
		typeof defaultFrontEndConfig === 'object' &&
		defaultFrontEndConfig.htmlDefaultHead
		? defaultFrontEndConfig.htmlDefaultHead
		: []
);
---

{head.map(({ tag: Tag, attrs, content }) => <Tag {...attrs} set:html={content} />)}