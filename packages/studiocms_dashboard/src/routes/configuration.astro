---
import { prerenderRoutes as pagePreRendered } from 'studiocms:mode';
import { Button } from '@studiocms/ui/components';
import Icon from '@studiocms/ui/utils/Icon.astro';
// import { useTranslations } from 'studiocms:i18n';
import { Layout } from '../components';
import PageHeader from '../components/PageHeader.astro';
import ConfigForm from '../components/islands/configuration/ConfigForm.astro';
import ConfigFormFallback from '../components/islands/configuration/ConfigFormFallback.astro';

const lang = 'en-us';
// const t = useTranslations(lang, '@studiocms/dashboard:index');
---

<Layout 
  title={"Configuration"}
  requiredPermission='owner'
  {pagePreRendered}
  {lang}
  >
  
  <PageHeader title="Site Configuration">
    <Button variant="solid" color="primary" type="submit" form="site-config-form">
      <Icon slot="start-content" name="check" width={24} height={24} />
      Save Changes
    </Button>
  </PageHeader>

  {
    pagePreRendered 
    ? (
      <ConfigForm server:defer transition:persist transition:persist-props>
        <ConfigFormFallback />
      </ConfigForm>
    )
    : <ConfigForm transition:persist transition:persist-props/>
  }

</Layout>
