---
// import { getWebVitals } from 'studiocms-dashboard:web-vitals';
import { getSiteConfig } from 'studiocms:helpers/contentHelper';
import { getLangFromUrl, staticPaths, useTranslatedPath, useTranslations } from 'studiocms:i18n';
import type { GetStaticPaths } from 'astro';
import { Layout } from '../components';
import PageHeader from '../components/islands/dashboard/PageHeader.astro';
import { makePageTitle } from '../utils/makePageTitle';

const contextConfig = await getSiteConfig();

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang, '@studiocms/dashboard:index');
// const tPath = useTranslatedPath(lang);

export const getStaticPaths = (() => {
	const paths = staticPaths();
	return paths;
}) satisfies GetStaticPaths;

// Get the web vitals
// const webVitals = await getWebVitals();
---

<Layout 
  sideBarActiveItemID="dashboard" 
  title={makePageTitle(t('title'), contextConfig)}
  description={contextConfig.description}
>
  <PageHeader server:defer />
  <span>{t('sub-header')}</span>
</Layout>
