---
// import { getWebVitals } from 'studiocms-dashboard:web-vitals';
import { useTranslations } from 'studiocms:i18n';
import { prerenderRoutes as pagePreRendered } from 'studiocms:mode';
import { Layout } from '../components';
import DashboardPageHeader from '../components/DashboardPageHeader.astro';
import DashboardGrid from '../components/islands/dashboard/DashboardGrid.astro';

const lang = 'en-us';
const t = useTranslations(lang, '@studiocms/dashboard:index');

// Get the web vitals
// const webVitals = await getWebVitals();
---

<Layout 
  title={t('title')}
  requiredPermission='editor'
  {pagePreRendered}
  {lang}
  >

  <div slot="header">
    <DashboardPageHeader {pagePreRendered} />
    <span>{t('sub-header')}</span>
  </div>

  { 
    pagePreRendered
    ? <DashboardGrid server:defer />
    : <DashboardGrid />
  }

</Layout>
