---
import { getUserData } from 'studiocms:auth/lib/user';
import { StudioCMSRoutes } from 'studiocms:helpers/routemap';
import type { StudioCMSSocials } from '@studiocms/core/consts';

const user = await getUserData(Astro);

const { permissionLevel, user: userData } = user;

const name = userData?.name;
const avatar = userData?.avatar;

type Props = { studioCMSSocials: StudioCMSSocials };
const {
	studioCMSSocials: { github: githubURL },
} = Astro.props;
const {
	mainLinks: { dashboardIndex },
} = StudioCMSRoutes;

let useName: string;

if (permissionLevel === 'unknown') {
	useName = 'Guest';
}
if (!name) {
	useName = 'User';
} else {
	useName = name;
}
---