---
import { getUserData } from 'studiocms:auth/lib/user';
import { Button, Input } from '@studiocms/ui/components';

const data = await getUserData(Astro);
---
{ data.user?.password ? ( <form id="password-update-form" class="password-update-form">
    <div class="password-form-entries">
        <Input 
            label='Current Password' 
            type={'password'} 
            placeholder='********' 
            isRequired 
            name='current-password' 
            autocomplete={'current-password'}
            />
        <Input 
            label='New Password' 
            type={'password'} 
            placeholder='********' 
            isRequired 
            name='new-password' 
            />
        <Input 
            label='Confirm New Password' 
            type={'password'} 
            placeholder='********' 
            isRequired 
            name='confirm-new-password' 
            />
    </div>
    <div class="form-footer">
        <Button type='submit' variant={'solid'} color='primary'>Update</Button> 
    </div>
</form> ) 
: <p>It looks like you signed in with a social account. You can't update your password here yet.</p>
}

<script>
    document.getElementById('password-update-form')?.addEventListener('submit', async (e) => {
        e.preventDefault();
    })
</script>

<style>
    .password-update-form {
        display: flex;
        flex-direction: column;
        gap: 1rem;
    }

    .password-form-entries {
        display: flex;
        flex-direction: row;
        gap: 1rem;
    }



    .form-footer {
        display: flex;
        flex-direction: row;
        justify-content: flex-end;
        gap: 1rem;
        width: 100%;
    }

</style>