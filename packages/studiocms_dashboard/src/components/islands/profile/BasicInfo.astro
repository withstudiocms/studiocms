---
import { getUserData } from 'studiocms:auth/lib/user';
import { Button, Card, Input } from '@studiocms/ui/components';

const data = await getUserData(Astro);
---

<Card fullWidth as="form" id="basic-info-form" class="basic-info-form">

    <div slot="header">
        <h2>Basic Info</h2>
    
        <div class="form-header">
            <Button type='submit' variant={'solid'} color='primary'>Update</Button> 
        </div>
    </div>

    <div class="form-inputs">

        <Input label='Display Name' placeholder='John Doe' value={data.user?.name} isRequired name='display-name' />

        <Input label='Username' placeholder='johndoe' value={data.user?.username} isRequired name='username' />
    
        <Input label='Email' placeholder='john@doe.com' value={data.user?.email} isRequired name='email' />
    
        <Input label='Website' placeholder='https://doe.com' value={data.user?.url} name='account-url' />

    </div>

</Card>

<script>
    const basicInfoForm = document.getElementById('basic-info-form') as HTMLFormElement;

    basicInfoForm.addEventListener('submit', async (e) => {
        e.preventDefault();
    })
</script>

<style>

    .basic-info-form {
        position: relative;
    }

    .basic-info-form .form-inputs {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 1rem;

        @media screen and (max-width: 768px) {
            grid-template-columns: 1fr;
        }
    }

    .form-header {
        display: block;
        position: absolute;
        top: 1rem;
        right: 1rem;
    }

</style>