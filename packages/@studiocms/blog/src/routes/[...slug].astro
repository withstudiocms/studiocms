---
import { StudioCMSRenderer } from 'studiocms:renderer';
import { runSDK, SDKCoreJs } from 'studiocms:sdk';
import Layout from '../layouts/Layout.astro';

let { slug } = Astro.params;

if (!slug) {
	slug = 'index';
}

const fullPageData = await runSDK(SDKCoreJs.GET.page.bySlug(slug));

if (!fullPageData) {
	return new Response(null, { status: 404 });
}

const page = fullPageData.data;

const { title, description, heroImage } = page;
---

<Layout title={title} description={description} heroImage={heroImage}>
	<main>
		<StudioCMSRenderer data={page} />
	</main>
</Layout>
