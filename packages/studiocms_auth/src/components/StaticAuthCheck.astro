---
import { getUserData } from 'studiocms:auth/lib/user';
import { StudioCMSRoutes } from 'studiocms:lib';

const { isLoggedIn } = await getUserData(Astro);
---
<div 
  id="login-check" 
  style="display: none;" 
  data-isLoggedIn={`${isLoggedIn}`}
  data-redirectRoute={StudioCMSRoutes.mainLinks.dashboardIndex}
  ></div>

<script is:inline>
  const loginCheck = document.getElementById('login-check');

  if (loginCheck.dataset.isLoggedIn === 'true') {
    window.location.href = loginCheck.dataset.redirectRoute;
  }
</script>